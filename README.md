# 📖 README.md (操作手冊) - v0.0.28 (The Intelligent Guide Edition)

## 🇯🇵 AI 日文斯巴達家教 (N2 Spartan Bot: Sprint Edition)

這是一個不僅具備 **「情緒感知」** 與 **「解答延遲」**，更進化為擁有 **「N2 衝刺規劃」**、**「雙軌難度評估」**、**「動態弱點鎖定」** 與 **「客製化指令」** 的 AI 斯巴達家教。
它會根據你每天的努力程度與答題正確率，精算你距離 N2 合格還差幾天，決定要給你榮耀的讚賞，還是地獄般的催促；同時，它也能聽懂你的請求，動態調整訓練方針。

---

## ✨ 核心功能詳解

### 1. 🗓️ 每日任務與 AI 主動引導 (v0.0.28 新功能)
為了最大化學習效率，系統導入了嚴謹的每日任務機制與更具智慧的 AI 互動模式。

*   **每日一次原則 (Once-a-Day Rule)**：系統以**台灣標準時間 (TWT, UTC+8)** 為準，每日只會生成一次進度測驗。一旦完成，當日便無法再次重複測驗，確保學習的規律性。
*   **🤖 AI 升級：從「批改者」到「引導者」**：AI 的職責不再僅僅是批改你的答案。
    *   **主動引導學習路徑**：當你完成每日進度時，AI 會主動用**「選項」或「問句」**來引導你思考接下來的學習計畫。例如，它會問你：「今天的進度完成了，感覺不錯吧？要不要趁勝追擊，挑戰幾題 Bonus 關卡，為你的 N2 之路多添幾塊磚？」
    *   **強化學習動機**：當你挑戰 Bonus 題目時，AI 會在讚美之餘，特別**強調「持續挑戰 Bonus 對 N2 合格的重要性」**，將你的每一次努力都與最終目標緊密掛鉤。

### 2. 🗂️ 智慧單字與文法庫 (Smart Vocabulary & Grammar)
這不僅是一個單字本，而是一個會「記仇」的學習資料庫。

*   **批量匯入**：支援直接貼上 JSON 格式文字，快速建立字庫。
*   **彈性存詞**：支援 `空白` 或 `/` 分隔 (如 `漢字/假名/意思`)，方便手機輸入。
    > 系統會自動偵測輸入內容，若包含 `~` 或 `...` 等符號，會自動歸類為 **「文法 (Grammar)」**。
*   **記憶強化 (Memory Reinforcement)**：
    *   **手動輸入**：重複輸入同一單字時，權重增加。
    *   **🚨 自動錯誤收錄 (Auto Mistake Capture)**：當你在翻譯練習中犯錯，AI 會自動將該錯誤項目加入資料庫，並給予 **極高的初始權重 (Count=5)**，確保你絕對忘不了它。

### 3. ⚖️ 動態權重演算法 (Dynamic Weighting System)
系統不再是隨機出題，而是根據你的熟練度動態調整每個字的出現機率。

*   **懲罰機制 (Punishment)**：若在翻譯中被 AI 判定誤用某字，該字權重直接 **+2**。教練會記住你的失誤，並在未來的考試中瘋狂考你。
*   **獎勵機制 (Reward)**：若在翻譯中正確使用了某個庫存單字（且 AI 未報錯），該字權重會 **大幅下降 (-2)**。熟練的單字會快速退場，讓你把時間花在刀口上。

### 4. 📊 雙軌難度與 3D 評分系統 (Dual-Track & 3D Scoring)
你的「閱讀（輸入）」與「寫作（輸出）」能力被分開評估。

*   **雙軌難度 (Dual-Track Difficulty)**：
    *   **中翻日等級 (`difficulty_cn_jp`)**：專注於你的助詞精準度、動詞活用與產出能力。
    *   **日翻中等級 (`difficulty_jp_cn`)**：專注於你的閱讀理解與翻譯信達雅。
*   **3D 評分與即時反應**：
    *   AI 會針對你的 **每一句回答** 進行 **0.0~10.0** 的獨立評分。
    *   **評分標準**：準確度、流暢度、以及 **🔥 挑戰加分**（使用了進階語彙或精彩的換句話說）。
    *   **難度連動規則**：
        *   **神級 (≥9.0)**：難度 **+0.1** (大幅獎勵)。
        *   **合格 (≥7.0)**：難度 **+0.05** (穩定進步)。
        *   **不及格 (<6.0)**：難度 **-0.1** (打回重練)。
*   **🛡️ 防偷懶機制 (Anti-Slacking)**：若你交白卷或亂打（0.0 分），系統會標記為 **SKIPPED**，這 **不會** 降低難度。

### 5. 📝 全能雙向批改 & 品質紅線 (Bi-directional Analysis)
*   **🔥 價值觀進化：追求「道地日文」 (v0.24 核心)**: 
    *   AI 的核心目標是**「追求像日本人一樣說話 (Natural Native Japanese)」**。
    *   它能分辨真正的**「文法錯誤 (Mistake)」**與**「風格語感 (Nuance)」**。若你使用 `コーヒー屋` 這種道地的口語，AI 不但不會判錯，反而會**給予高度讚賞**。
*   **🚫 品質紅線 (Quality Redlines)**: Prompt 中內建嚴格的「防火牆」，嚴禁 AI 生成 **「中式日文」** 或 **「翻譯腔中文」**。
*   **✨ 三種說法**: 批改時提供 **正式 (Formal)**、**口語 (Casual)**、**換句話說 (Paraphrase)** 三種版本，訓練你的語彙豐富度。

### 6. 🏃 N2 衝刺模式 & 🎯 弱點特訓 (Sprint & Weakness Targeting)
系統預設為 **180 天 N2 衝刺計畫**。

*   **每日必修 (Daily Mission)**：每天發送 **10 題**（7 題中翻日，3 題日翻中）。
*   **弱點強攻演算法**：這 10 題會**強制包含 3 個你權重最高（最常錯）的弱點**，進行針對性複習。
*   **進度警報**：系統會計算你的理論進度與實際進度的差距。若落後，教練會毫不留情地用數據（落後天數）來進行情緒勒索。
*   **Bonus 無限挑戰 (Infinite Mode)**：完成每日必修後，可無限次挑戰更高難度的 Bonus 題目。

### 7. 🧠 AI 雙向溝通指令 (v0.27 核心)
你現在可以直接跟 AI 教練溝通，調整訓練方針！

*   **`[LV]` - 等級評估 (Level Assessment)**
    *   **自動評估**：輸入 `[LV]`
        *   AI 會閱讀你過去 50 筆翻譯紀錄，綜合分析你的「助詞準確度」、「動詞活用熟練度」，給出一個精確的等級評估 (如 Lv 2.4)，並用**教練的語氣**說明理由。
    *   **手動跳級**：輸入 `[LV] N3` 或 `[LV] 3.5`
        *   強制設定目前難度。

*   **`[RE]` - 客製化請求 (Request)**
    *   **功能**：這是你與教練溝通的橋樑。你可以提出任何關於學習的請求。
    *   **AI 理解與執行**：AI 會理解你的意圖，用它獨特的創意風格回應你，並**秘密地在後端執行對應操作**。
    *   **範例**：
        *   **覺得太難/太簡單**: 輸入 `[RE] 這幾天有點難，我想放鬆一點`，AI 可能會毒舌你一番，但會偷偷幫你把**下次的難度調降 0.2**。
        *   **想學特定內容**: 輸入 `[RE] 我想多練習「授受動詞」`，AI 會誇獎你的野心，並在**下一次的每日測驗中，動態加入關於授受動詞的題目**。
        *   **閒聊**: 輸入 `[RE] 教練你今天心情好嗎?`，AI 會用教練的身份提醒你該去練習了。

### 8. 📊 學習儀表板與日誌 (Log Dashboard)
所有的對話與批改紀錄都會被保存到 `TG_MSG.log`，並在檔案最上方生成一個顯示所有關鍵數據的儀表板。

---

## 🕹️ 使用指南與指令範例

請直接複製以下內容傳送給 Telegram 機器人進行測試。

### A. 匯入與儲存

```text
# 匯入單字 (貼上 JSON 陣列)
[{"kanji": "挑戦", "kana": "ちょうせん", "meaning": "挑戰"}]

# 儲存單字 (推薦用斜線分隔)
努力/どりょく/努力

# 儲存文法 (AI 會自動辨識)
~わけではない/並不是說
```

### B. 翻譯/交作業

```text
# 直接傳送你的答案 (可多行)
明日は雨が降るそうです。
ここは撮影してはいけません。
(不會的題目可以直接留白，AI 會教你)
```

### C. 與 AI 溝通 (v0.27 核心)

```text
# 請求 AI 評估我的等級
[LV]

# 我覺得我已經有 N2 水準了，直接跳級！
[LV] N2

# 最近的題目太難了，拜託簡單一點
[RE] 最近有點打擊信心，題目可以稍微簡單一些嗎？

# 我想針對「被動態」進行特訓
[RE] 我對被動形的變化還是不熟，下次可以多考一些嗎？
```

---

## ⚠️ 重要提醒 (Limitations)

1.  **API 額度限制**：專案使用 Google Gemini 免費版 API，請留意每日用量上限。
2.  **Log 保存**：若使用 GitHub Actions 等 CI/CD 工具，請確保 Workflow 中有 `git add TG_MSG.log` 的步驟，否則雲端執行的紀錄會遺失。
3.  **關於難度**：Lv 1.0 ~ 3.9 屬於「N2 衝刺期」，會有進度壓力；Lv 4.0 以上進入「無限挑戰期」。
